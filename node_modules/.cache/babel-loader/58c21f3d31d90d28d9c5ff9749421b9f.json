{"ast":null,"code":"'use strict';\n\nconst StrictModeError = require('../../error/strict');\n/*!\n * ignore\n */\n\n\nmodule.exports = function (schematype) {\n  if (schematype.$immutable) {\n    schematype.$immutableSetter = createImmutableSetter(schematype.path, schematype.options.immutable);\n    schematype.set(schematype.$immutableSetter);\n  } else if (schematype.$immutableSetter) {\n    schematype.setters = schematype.setters.filter(fn => fn !== schematype.$immutableSetter);\n    delete schematype.$immutableSetter;\n  }\n};\n\nfunction createImmutableSetter(path, immutable) {\n  return function immutableSetter(v) {\n    if (this == null || this.$__ == null) {\n      return v;\n    }\n\n    if (this.isNew) {\n      return v;\n    }\n\n    const _immutable = typeof immutable === 'function' ? immutable.call(this, this) : immutable;\n\n    if (!_immutable) {\n      return v;\n    }\n\n    if (this.$__.strictMode === 'throw' && v !== this[path]) {\n      throw new StrictModeError(path, 'Path `' + path + '` is immutable ' + 'and strict mode is set to throw.', true);\n    }\n\n    return this[path];\n  };\n}","map":null,"metadata":{},"sourceType":"script"}